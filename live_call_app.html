<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Live Call Pro - Find Your Spark</title>
    
    <!-- App Icon and Splash Screen Settings -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#110f1a">
    <link rel="apple-touch-icon" href="https://i.imgur.com/1gODn9X.png">
    <link rel="icon" type="image/png" href="https://i.imgur.com/1gODn9X.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(60deg, #d81b60, #ff4081, #f50057);
            --romantic-gradient: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            --dark-bg: #110f1a;
            --text-color: #f5f5f5;
            --font-family: 'Poppins', sans-serif;
        }
        body, html { margin: 0; padding: 0; height: 100%; font-family: var(--font-family); background-color: var(--dark-bg); color: var(--text-color); overflow: hidden; }
        .screen { position: absolute; top: 0; left: 0; display: flex; width: 100%; height: 100%; flex-direction: column; justify-content: center; align-items: center; text-align: center; box-sizing: border-box; padding: 20px; z-index: 1; opacity: 0; visibility: hidden; transition: opacity 0.5s ease, visibility 0.5s ease; }
        .active-screen { opacity: 1; visibility: visible; }
        
        #age-gate-screen { background: var(--romantic-gradient); z-index: 100; }
        #age-gate-screen h1, #start-screen h1 { font-size: 3.2em; text-shadow: 0 3px 10px rgba(0,0,0,0.3); margin-bottom: 10px; font-weight: 700; }
        #age-gate-screen p, #start-screen p { color: rgba(255,255,255,0.8); font-size: 1.1em; max-width: 320px; }
        .age-buttons { display: flex; gap: 20px; margin-top: 30px; }
        .action-button { padding: 16px 45px; font-size: 1.2em; font-weight: 600; background: rgba(255,255,255,0.9); color: #333; border: none; border-radius: 50px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
        .action-button.primary { background: var(--primary-gradient); background-size: 200%; color: white; }
        .action-button:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0,0,0,0.3); }
        #age-warning { color: white; margin-top: 20px; display: none; font-weight: 600; }

        #connecting-screen { background-color: var(--dark-bg); }
        .radar-scanner { position: relative; width: 180px; height: 180px; margin-bottom: 40px; }
        .radar-scanner .profile-pic { width: 100%; height: 100%; border-radius: 50%; border: 4px solid #f50057; box-shadow: 0 0 30px #f5005780; animation: pulse 2s infinite; object-fit: cover; background-color: #333; }
        @keyframes pulse { 0% { transform: scale(0.95); box-shadow: 0 0 0 0 #f5005780; } 70% { transform: scale(1); box-shadow: 0 0 0 15px rgba(245,0,87,0); } 100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(245,0,87,0); } }
        
        #call-screen { background: none; }
        .video-container { position: absolute; top:0; left:0; width: 100%; height: 100%; z-index: -1; }
        #remote-video { width: 100%; height: 100%; object-fit: cover; }
        .local-video-wrapper { position: absolute; bottom: 160px; right: 20px; width: 120px; height: 180px; background-color: #000; border: 2px solid #fff; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); overflow: hidden; }
        #local-video { width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1); }
        #video-off-placeholder { width: 100%; height: 100%; display: none; justify-content: center; align-items: center; background-color: #222; }
        #video-off-placeholder svg { width: 50px; height: 50px; fill: #666; }
        .call-info { position: absolute; top: 40px; left: 20px; text-align: left; }
        #stranger-name { font-size: 1.8em; font-weight: 600; text-shadow: 0 2px 5px #000; }
        #stranger-location { font-size: 1.1em; color: #ddd; text-shadow: 0 2px 5px #000; }
        .call-controls { position: absolute; bottom: 50px; width: 100%; display: flex; justify-content: center; align-items: center; gap: 20px; }
        .control-button { width: 60px; height: 60px; display: flex; justify-content: center; align-items: center; border: none; border-radius: 50%; cursor: pointer; background-color: rgba(0,0,0,0.3); backdrop-filter: blur(10px); transition: all 0.2s ease; }
        .control-button:hover { background-color: rgba(0,0,0,0.5); }
        #end-call-btn { width: 70px; height: 70px; background: var(--primary-gradient); animation: pulse-red 2s infinite; box-shadow: 0 0 20px #f50057; }
        @keyframes pulse-red { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .control-button svg { width: 28px; height: 28px; fill: white; }
    </style>
</head>
<body>
    <div id="age-gate-screen" class="screen active-screen">
        <h1>Are you 18+?</h1>
        <p>You must confirm you are 18 years or older to proceed.</p>
        <div class="age-buttons">
            <button id="decline-age-btn" class="action-button">I am not 18</button>
            <button id="confirm-age-btn" class="action-button primary">Yes, I am 18+</button>
        </div>
        <p id="age-warning">You must be 18+ to use this service.</p>
    </div>
    
    <div id="start-screen" class="screen">
        <h1>Live Call Pro</h1>
        <p>Ready to find your Spark? Tap Start to connect.</p>
        <button id="start-call-btn" class="action-button primary">Start</button>
    </div>

    <div id="permission-screen" class="screen"><h1>Camera Access</h1><p>Is app ko istemal karne ke liye, camera aur mic ki ijazat zaroori hai. Please refresh karke ijazat dein.</p></div>
    
    <div id="connecting-screen" class="screen">
         <div class="radar-scanner">
             <!-- ===== YAHAN PAR TASVEER KA LINK THEEK KAR DIYA GAYA HAI (CACHE BUSTER KE SAATH) ===== -->
             <img class="profile-pic" src="https://i.imgur.com/gthI1z6.jpeg?v=2" alt="Searching...">
         </div>
         <h2>Finding a new connection...</h2>
    </div>

    <div id="call-screen" class="screen">
        <div class="video-container"><video id="remote-video" playsinline loop muted></video></div>
        <div class="local-video-wrapper">
            <video id="local-video" autoplay muted playsinline></video>
            <div id="video-off-placeholder"><svg viewBox="0 0 24 24"><path d="M12,12A3,3 0,0,0,9,9C9,7.35,10.35,6,12,6C13.65,6,15,7.35,15,9C15,10.65,13.65,12,12,12M12,4A5,5 0,0,1,17,9C17,11.38,15.19,13.47,12.86,13.88C15.89,14.53,18,17.03,18,20V22H6V20C6,17.03,8.11,14.53,11.14,13.88C8.81,13.47,7,11.38,7,9A5,5 0,0,1,12,4Z"/></svg></div>
        </div>
        <div class="call-info"><div id="stranger-name"></div><div id="stranger-location"></div></div>
        <div class="call-controls">
            <button id="video-off-btn" class="control-button" title="Stop My Video"><svg viewBox="0 0 24 24"><path d="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"/></svg></button>
            <button id="end-call-btn" class="control-button" title="End Call"><svg viewBox="0 0 24 24"><path d="M12,9C10.4,9 8.85,9.25 7.4,9.72V12.82C7.4,13.22 7.17,13.56 6.84,13.72C5.86,14.21 4.97,14.84 4.19,15.57C4,15.75 3.75,15.86 3.5,15.86C3.2,15.86 2.95,15.74 2.77,15.56L0.29,13.08C0.11,12.9 0,12.65 0,12.38C0,12.11 0.11,11.86 0.29,11.68C3.33,8.76 7.46,7 12,7C16.54,7 20.67,8.76 23.71,11.68C23.89,11.86 24,12.11 24,12.38C24,12.65 23.89,12.9 23.71,13.08L21.23,15.56C21.05,15.74 20.8,15.86 20.5,15.86C20.25,15.86 20,15.75 19.81,15.57C19.03,14.84 18.14,14.21 17.16,13.72C16.83,13.56 16.6,13.22 16.6,12.82V9.72C15.15,9.25 13.6,9 12,9Z"/></svg></button>
            <button id="mute-btn" class="control-button" title="Mute My Mic"><svg viewBox="0 0 24 24"><path d="M12,1A3,3 0 0,0 9,4V10A3,3 0 0,0 12,13A3,3 0 0,0 15,10V4A3,3 0 0,0 12,1M19,10C19,13.89 15.91,17.13 12,17.5V21H17V23H7V21H12V17.5C8.09,17.13 5,13.89 5,10H7C7,12.76 9.24,15 12,15C14.76,15 17,12.76 17,10H19Z"/></svg></button>
        </div>
    </div>
    
    <div id="end-screen" class="screen"><h2>Connection Lost</h2><p>Let's find someone new for you.</p><button id="call-again-btn" class="action-button primary">Search Again</button></div>

    <script>
        const screens = { ageGate: document.getElementById('age-gate-screen'), start: document.getElementById('start-screen'), permission: document.getElementById('permission-screen'), connecting: document.getElementById('connecting-screen'), call: document.getElementById('call-screen'), end: document.getElementById('end-screen') };
        const localVideo = document.getElementById('local-video'), remoteVideo = document.getElementById('remote-video');
        const strangerName = document.getElementById('stranger-name'), strangerLocation = document.getElementById('stranger-location');
        const startCallBtn = document.getElementById('start-call-btn'), endCallBtn = document.getElementById('end-call-btn'), callAgainBtn = document.getElementById('call-again-btn');
        const muteBtn = document.getElementById('mute-btn'), videoOffBtn = document.getElementById('video-off-btn');
        const videoOffPlaceholder = document.getElementById('video-off-placeholder');
        const confirmAgeBtn = document.getElementById('confirm-age-btn'), declineAgeBtn = document.getElementById('decline-age-btn'), ageWarning = document.getElementById('age-warning');
        let localStream;
        const preRecordedVideos = [ 'https://github.com/AhmadAbbas75/Live-Call-App/raw/refs/heads/main/lv_0_20250719124621.mp4', 'https://github.com/AhmadAbbas75/Live-Call-App/raw/refs/heads/main/lv_0_20250719124525.mp4', 'https://github.com/AhmadAbbas75/Live-Call-App/raw/refs/heads/main/lv_0_20250719124148.mp4', 'https://github.com/AhmadAbbas75/Live-Call-App/raw/refs/heads/main/lv_0_20250719123827.mp4', 'https://github.com/AhmadAbbas75/Live-Call-App/raw/refs/heads/main/lv_0_20250719123552.mp4', 'https://github.com/AhmadAbbas75/Live-Call-App/raw/refs/heads/main/lv_0_20250719123609.mp4', 'https://github.com/AhmadAbbas75/Live-Call-App/raw/refs/heads/main/lv_0_20250719123451.mp4', 'https://github.com/AhmadAbbas75/Live-Call-App/raw/refs/heads/main/lv_0_20250719123510.mp4', 'https://github.com/AhmadAbbas75/Live-Call-App/raw/refs/heads/main/lv_0_20250719123425.mp4' ];
        const femaleProfiles = [ { name: 'Jessica', location: 'USA' }, { name: 'Aisha', location: 'India' }, { name: 'Sofia', location: 'Brazil' }, { name: 'Anaya', location: 'Pakistan' }, { name: 'Yuki', location: 'Japan' }, { name: 'Fatima', location: 'Egypt' }, { name: 'Isabella', location: 'Italy' }, { name: 'Chloe', location: 'France' } ];
        function showScreen(screenName) { Object.values(screens).forEach(s => s.classList.remove('active-screen')), screens[screenName].classList.add('active-screen') }
        async function startLocalVideo() { try { if (localStream) localStream.getTracks().forEach(track => track.stop()); localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true }); localVideo.srcObject = localStream } catch (e) { showScreen('permission'); throw e } }
        async function startCall() { showScreen('connecting'); try { await startLocalVideo(), setTimeout(() => { const randomVideo = preRecordedVideos[Math.floor(Math.random() * preRecordedVideos.length)], randomProfile = femaleProfiles[Math.floor(Math.random() * femaleProfiles.length)]; remoteVideo.src = randomVideo, remoteVideo.play(), strangerName.textContent = randomProfile.name, strangerLocation.textContent = randomProfile.location, showScreen('call') }, 3000) } catch (error) {} }
        function endCall() { if (localStream) localStream.getTracks().forEach(track => track.stop()); remoteVideo.pause(); showScreen('end') }
        function toggleTrack(kind) { if (!localStream) return; const track = localStream.getTracks().find(t => t.kind === kind); if (!track) return; track.enabled = !track.enabled; if (kind === 'video') videoOffPlaceholder.style.display = track.enabled ? 'none' : 'flex'; }
        confirmAgeBtn.addEventListener('click', () => showScreen('start'));
        declineAgeBtn.addEventListener('click', () => { ageWarning.style.display = 'block'; confirmAgeBtn.disabled = true; });
        startCallBtn.addEventListener('click', startCall);
        endCallBtn.addEventListener('click', endCall);
        callAgainBtn.addEventListener('click', startCall);
        muteBtn.addEventListener('click', () => toggleTrack('audio'));
        videoOffBtn.addEventListener('click', () => toggleTrack('video'));
    </script>
</body>
</html>